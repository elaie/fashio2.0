{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\elaie\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\pages\\\\CardDetailsPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { savedCardsList } from '../actions/cardActions';\nimport { checkTokenValidation, logout } from '../actions/userActions';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { Spinner } from 'react-bootstrap';\nimport Message from \"../components/Message\";\nimport DeleteCardComponent from '../components/DeleteCardComponent';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CardDetailsPage = () => {\n  _s();\n\n  let history = useHistory();\n  const dispatch = useDispatch();\n  const [userId, setUserId] = useState(0);\n  const [runCardDeleteHandler, setRunCardDeleteHandler] = useState(false);\n  const [deleteCardNumber, setDeleteCardNumber] = useState(\"\"); // login reducer\n\n  const userLoginReducer = useSelector(state => state.userLoginReducer);\n  const {\n    userInfo\n  } = userLoginReducer; // check token validation reducer\n\n  const checkTokenValidationReducer = useSelector(state => state.checkTokenValidationReducer);\n  const {\n    error: tokenError\n  } = checkTokenValidationReducer; // saved cards list reducer\n\n  const savedCardsListReducer = useSelector(state => state.savedCardsListReducer);\n  const {\n    stripeCards,\n    loading\n  } = savedCardsListReducer; // saved cards list reducer\n\n  const deleteSavedCardReducer = useSelector(state => state.deleteSavedCardReducer);\n  const {\n    success\n  } = deleteSavedCardReducer; // toggle run card delete handler\n\n  const toggleRunCardDeleteHandler = () => {\n    setRunCardDeleteHandler(!runCardDeleteHandler);\n  };\n\n  useEffect(() => {\n    if (!userInfo) {\n      history.push(\"/login\");\n    } else {\n      dispatch(checkTokenValidation());\n      dispatch(savedCardsList());\n    }\n  }, [dispatch, history, userInfo]);\n\n  if (userInfo && tokenError === \"Request failed with status code 401\") {\n    alert(\"Session expired, please login again.\");\n    dispatch(logout());\n    history.push(\"/login\");\n    window.location.reload();\n  } // card deletion message\n\n\n  if (success) {\n    alert(\"Card successfully deleted.\");\n    window.location.reload();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        display: \"flex\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Getting Card Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(DeleteCardComponent, {\n          userId: userId,\n          deleteCardNumber: deleteCardNumber,\n          runCardDeleteHandler: runCardDeleteHandler,\n          toggleRunCardDeleteHandler: toggleRunCardDeleteHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), stripeCards.length > 0 ? stripeCards.map((each, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          className: \"mr-6 mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Name on Card:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.name_on_card ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: each.name_on_card\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 54\n            }, this) : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Exp Month:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.exp_month ? each.exp_month : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Exp Year:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.exp_year ? each.exp_year : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mr-6 mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Address City:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.address_city ? each.address_city : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Address Country:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.address_country ? each.address_country : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Address State:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.address_state ? each.address_state : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mb-2 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            className: \"p-3 bg-info text-white\",\n            children: \"Address Zip:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"p-3\",\n            children: each.address_zip ? each.address_zip : \"Not Set\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/stripe-card-update/\",\n          children: \"Update Card details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-1 text-primary\",\n          children: \"| \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"#\",\n          onClick: () => {\n            setDeleteCardNumber(each.card_number);\n            setUserId(each.user);\n            setRunCardDeleteHandler(!runCardDeleteHandler);\n          },\n          children: \"Delete Card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this)]\n    }, idx, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Message, {\n        variant: \"info\",\n        children: \"Card details not available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CardDetailsPage, \"467S+np0x3JiBxl/xWemZ3ipjBM=\", false, function () {\n  return [useHistory, useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = CardDetailsPage;\nexport default CardDetailsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardDetailsPage\");","map":{"version":3,"sources":["C:/Users/elaie/Downloads/FullStack_Ecommerce_App-main/frontend/src/pages/CardDetailsPage.js"],"names":["React","useEffect","useState","useDispatch","useSelector","savedCardsList","checkTokenValidation","logout","Container","Row","Col","Link","Spinner","Message","DeleteCardComponent","useHistory","CardDetailsPage","history","dispatch","userId","setUserId","runCardDeleteHandler","setRunCardDeleteHandler","deleteCardNumber","setDeleteCardNumber","userLoginReducer","state","userInfo","checkTokenValidationReducer","error","tokenError","savedCardsListReducer","stripeCards","loading","deleteSavedCardReducer","success","toggleRunCardDeleteHandler","push","alert","window","location","reload","display","length","map","each","idx","name_on_card","exp_month","exp_year","address_city","address_country","address_state","address_zip","justifyContent","alignItems","card_number","user"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { savedCardsList } from '../actions/cardActions'\nimport { checkTokenValidation, logout } from '../actions/userActions'\nimport { Container, Row, Col } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport { Spinner } from 'react-bootstrap'\nimport Message from \"../components/Message\"\nimport DeleteCardComponent from '../components/DeleteCardComponent'\nimport { useHistory } from 'react-router-dom'\n\n\nconst CardDetailsPage = () => {\n\n    let history = useHistory()\n\n    const dispatch = useDispatch()\n    const [userId, setUserId] = useState(0)\n    const [runCardDeleteHandler, setRunCardDeleteHandler] = useState(false)\n    const [deleteCardNumber, setDeleteCardNumber] = useState(\"\")\n\n    // login reducer\n    const userLoginReducer = useSelector(state => state.userLoginReducer)\n    const { userInfo } = userLoginReducer\n\n    // check token validation reducer\n    const checkTokenValidationReducer = useSelector(state => state.checkTokenValidationReducer)\n    const { error: tokenError } = checkTokenValidationReducer\n\n    // saved cards list reducer\n    const savedCardsListReducer = useSelector(state => state.savedCardsListReducer)\n    const { stripeCards, loading } = savedCardsListReducer\n\n    // saved cards list reducer\n    const deleteSavedCardReducer = useSelector(state => state.deleteSavedCardReducer)\n    const { success } = deleteSavedCardReducer\n\n\n    // toggle run card delete handler\n    const toggleRunCardDeleteHandler = () => {\n        setRunCardDeleteHandler(!runCardDeleteHandler)\n    }\n\n    useEffect(() => {\n        if (!userInfo) {\n            history.push(\"/login\")\n        } else {\n            dispatch(checkTokenValidation())\n            dispatch(savedCardsList())\n        }\n    }, [dispatch, history, userInfo])\n\n    if (userInfo && tokenError === \"Request failed with status code 401\") {\n        alert(\"Session expired, please login again.\")\n        dispatch(logout())\n        history.push(\"/login\")\n        window.location.reload()\n    }\n\n    // card deletion message\n    if (success) {\n        alert(\"Card successfully deleted.\")\n        window.location.reload()\n\n    }\n\n    return (\n        <div>\n            {loading && <span style={{ display: \"flex\" }}>\n                <h5>Getting Card Information</h5>\n                <span className=\"ml-2\">\n                    <Spinner animation=\"border\" />\n                </span>\n            </span>}\n\n            {/* Modal Start*/}\n            <div>\n                <>\n                    <DeleteCardComponent\n                        userId={userId}\n                        deleteCardNumber={deleteCardNumber}\n                        runCardDeleteHandler={runCardDeleteHandler}\n                        toggleRunCardDeleteHandler={toggleRunCardDeleteHandler}\n                    />\n                </>\n            </div>\n\n            {stripeCards.length > 0 ? stripeCards.map((each, idx) => (\n                <div key={idx}>\n                    <Container>\n                        <Row className=\"mr-6 mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Name on Card:</Col>\n                            <Col className=\"p-3\">\n                                {each.name_on_card ? <span>\n                                    {each.name_on_card}\n                                </span>\n                                    : \"Not Set\"}\n                            </Col>\n\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Exp Month:</Col>\n                            <Col className=\"p-3\">{each.exp_month ? each.exp_month : \"Not Set\"}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Exp Year:</Col>\n                            <Col className=\"p-3\">{each.exp_year ? each.exp_year : \"Not Set\"}</Col>\n                        </Row>\n                        <Row className=\"mr-6 mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Address City:</Col>\n                            <Col className=\"p-3\">{each.address_city ? each.address_city : \"Not Set\"}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Address Country:</Col>\n                            <Col className=\"p-3\">{each.address_country ? each.address_country : \"Not Set\"}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Address State:</Col>\n                            <Col className=\"p-3\">{each.address_state ? each.address_state : \"Not Set\"}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Address Zip:</Col>\n                            <Col className=\"p-3\">{each.address_zip ? each.address_zip : \"Not Set\"}</Col>\n                        </Row>\n                    </Container>\n                    <span style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                        <Link to=\"/stripe-card-update/\">Update Card details</Link>\n                        <span className=\"ml-1 text-primary\">| </span>\n                        <span className=\"ml-1\"></span>\n\n                        <Link to=\"#\"\n                            onClick={() => {\n                                setDeleteCardNumber(each.card_number)\n                                setUserId(each.user)\n                                setRunCardDeleteHandler(!runCardDeleteHandler)\n                            }}\n                        >Delete Card</Link>\n                    </span>\n                </div>\n            )) :\n                <div>\n                    <Message variant='info'>Card details not available.</Message>\n                </div>\n            }\n        </div>\n    )\n}\n\nexport default CardDetailsPage\n"]},"metadata":{},"sourceType":"module"}