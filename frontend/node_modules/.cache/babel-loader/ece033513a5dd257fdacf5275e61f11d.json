{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\elaie\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\pages\\\\AccountPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { userDetails, logout, checkTokenValidation } from '../actions/userActions'; //import { UPDATE_USER_ACCOUNT_RESET } from '../constants'\n\nimport Message from '../components/Message';\nimport { Spinner } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AccountPage() {\n  _s();\n\n  let history = useHistory();\n  const dispatch = useDispatch(); // check token validation reducer\n\n  const checkTokenValidationReducer = useSelector(state => state.checkTokenValidationReducer);\n  const {\n    error: tokenError\n  } = checkTokenValidationReducer; // login reducer\n\n  const userLoginReducer = useSelector(state => state.userLoginReducer);\n  const {\n    userInfo\n  } = userLoginReducer; // user details reducer\n\n  const userDetailsReducer = useSelector(state => state.userDetailsReducer);\n  const {\n    user: userAccDetails,\n    loading\n  } = userDetailsReducer;\n  useEffect(() => {\n    if (!userInfo) {\n      history.push(\"/login\");\n    } else {\n      try {\n        dispatch(checkTokenValidation());\n        dispatch(userDetails(userInfo.id));\n      } catch (error) {\n        history.push(\"/\");\n      }\n    }\n  }, [history, userInfo, dispatch]); // logout\n\n  const logoutHandler = () => {\n    dispatch(logout()); // action\n  };\n\n  if (userInfo && tokenError === \"Request failed with status code 401\") {\n    alert(\"Session expired, please login again.\");\n    dispatch(logout());\n    history.push(\"/login\");\n    window.location.reload();\n  }\n\n  const renderData = () => {\n    try {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [loading && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: \"flex\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Getting User Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 69\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 127\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 102\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"mr-6 mb-2 border border-dark\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 2,\n              className: \"p-3 bg-info text-white\",\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              className: \"p-3\",\n              children: userAccDetails.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-2 border border-dark\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 2,\n              className: \"p-3 bg-info text-white\",\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              className: \"p-3\",\n              children: userAccDetails.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-2 border border-dark\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 2,\n              className: \"p-3 bg-info text-white\",\n              children: \"Admin Privileges:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              className: \"p-3\",\n              children: userAccDetails.admin ? \"Yes\" : \"No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/account/update`,\n            children: \"Update Account details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-1 text-primary\",\n            children: \"| \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/account/delete/`,\n            children: \"Delete Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this);\n    } catch (error) {\n      return /*#__PURE__*/_jsxDEV(Message, {\n        variant: \"danger\",\n        children: [\"Something went wrong, go back to \", /*#__PURE__*/_jsxDEV(Link, {\n          onClick: logoutHandler,\n          to: `/login`,\n          children: \" Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 79\n        }, this), \" page.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  return renderData();\n}\n\n_s(AccountPage, \"J2VkyM7be6BwTEPPX1xMm9BVwyU=\", false, function () {\n  return [useHistory, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = AccountPage;\nexport default AccountPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountPage\");","map":{"version":3,"sources":["C:/Users/elaie/Downloads/FullStack_Ecommerce_App-main/frontend/src/pages/AccountPage.js"],"names":["React","useEffect","Container","Row","Col","Link","useDispatch","useSelector","userDetails","logout","checkTokenValidation","Message","Spinner","useHistory","AccountPage","history","dispatch","checkTokenValidationReducer","state","error","tokenError","userLoginReducer","userInfo","userDetailsReducer","user","userAccDetails","loading","push","id","logoutHandler","alert","window","location","reload","renderData","display","username","email","admin","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { Container, Row, Col } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { userDetails, logout, checkTokenValidation } from '../actions/userActions'\n//import { UPDATE_USER_ACCOUNT_RESET } from '../constants'\nimport Message from '../components/Message'\nimport { Spinner } from 'react-bootstrap'\nimport {useHistory} from 'react-router-dom'\n\n\nfunction AccountPage() {\n\n\n    let history = useHistory()\n    const dispatch = useDispatch()\n\n    // check token validation reducer\n    const checkTokenValidationReducer = useSelector(state => state.checkTokenValidationReducer)\n    const { error: tokenError } = checkTokenValidationReducer\n\n    // login reducer\n    const userLoginReducer = useSelector(state => state.userLoginReducer)\n    const { userInfo } = userLoginReducer\n\n    // user details reducer\n    const userDetailsReducer = useSelector(state => state.userDetailsReducer)\n    const { user: userAccDetails, loading } = userDetailsReducer\n\n    useEffect(() => {\n        if (!userInfo) {\n            history.push(\"/login\")\n        } else {\n            try {\n                dispatch(checkTokenValidation())\n                dispatch(userDetails(userInfo.id))\n            } catch (error) {\n                history.push(\"/\")\n            }\n        }\n    }, [history, userInfo, dispatch])\n\n    // logout\n    const logoutHandler = () => {\n        dispatch(logout()) // action\n    }\n\n    if (userInfo && tokenError === \"Request failed with status code 401\") {\n        alert(\"Session expired, please login again.\")\n        dispatch(logout())\n        history.push(\"/login\")\n        window.location.reload()\n      }\n\n    const renderData = () => {\n        try {\n\n            return (\n                <div>\n                    {loading && <span style = {{ display: \"flex\" }}><h5>Getting User Information</h5><span className = \"ml-2\"><Spinner animation=\"border\" /></span></span>}\n                    <Container>\n                        <Row className=\"mr-6 mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Name:</Col>\n                            <Col className=\"p-3\">{userAccDetails.username}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Email:</Col>\n                            <Col className=\"p-3\">{userAccDetails.email}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Admin Privileges:</Col>\n                            <Col className=\"p-3\">{userAccDetails.admin ? \"Yes\" : \"No\"}</Col>\n                        </Row>\n                    </Container>\n                    <span style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                        <Link to={`/account/update`}>Update Account details</Link>\n                        <span className=\"ml-1 text-primary\">| </span>\n                        <span className=\"ml-1\"></span>\n\n                        <Link to={`/account/delete/`}>Delete Account</Link>\n                    </span>\n                </div>\n            )\n        } catch (error) {\n            return <Message variant='danger'>Something went wrong, go back to <Link\n                onClick={logoutHandler} to={`/login`}\n            > Login</Link> page.</Message>\n        }\n    }\n\n\n    return renderData()\n\n}\n\nexport default AccountPage\n"]},"metadata":{},"sourceType":"module"}